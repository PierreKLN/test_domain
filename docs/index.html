<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ma Boutique – Modèle e‑commerce</title>
  <meta name="description" content="Modèle HTML/CSS/JS d'une boutique e‑commerce en 1 fichier : liste produits, panier, recherche et pseudo‑checkout." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f1216;
      --panel: #151a21;
      --muted: #8b98a5;
      --text: #f5f7fb;
      --brand: #4f8cff;
      --brand-2: #6ee7b7;
      --danger: #ef4444;
      --border: #1f2630;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text); background: radial-gradient(1200px 800px at 20% -10%, #1b2330 0, transparent 60%), var(--bg);
      line-height: 1.5;
    }
    a { color: inherit; text-decoration: none; }
    button { font: inherit; color: inherit; }
    img { max-width: 100%; display: block; }

    /* Layout */
    .container { width: min(1200px, 92%); margin-inline: auto; }
    header {
      position: sticky; top: 0; z-index: 20; backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(15,18,22,.85), rgba(15,18,22,.6));
      border-bottom: 1px solid var(--border);
    }
    .nav { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px; padding: 14px 0; }
    .logo { display: inline-flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .2px; }
    .logo-mark { width: 34px; height: 34px; border-radius: 10px; background: linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow: var(--shadow); display: grid; place-items: center; font-weight: 700; }
    .nav-actions { justify-self: end; display: flex; gap: 10px; align-items: center; }
    .search { display: flex; align-items: center; gap: 10px; background: var(--panel); border: 1px solid var(--border); border-radius: 999px; padding: 10px 14px; }
    .search input { all: unset; width: 260px; color: var(--text); }
    .icon { width: 20px; height: 20px; opacity: .75; }
    .btn { border: 1px solid var(--border); background: var(--panel); padding: 10px 14px; border-radius: 12px; cursor: pointer; transition: .2s transform ease, .2s background ease, .2s border-color ease; }
    .btn:hover { transform: translateY(-1px); border-color: #2a3442; }
    .btn.primary { background: linear-gradient(135deg, #3b7cff, #4f8cff); border-color: rgba(255,255,255,.1); }

    /* Hero */
    .hero { padding: 36px 0 10px; }
    .hero-wrap { display: grid; grid-template-columns: 1.2fr .8fr; gap: 20px; align-items: center; }
    .hero-card { background: linear-gradient(180deg, rgba(79,140,255,.12), rgba(79,140,255,0)); border: 1px solid var(--border); border-radius: var(--radius); padding: 28px; }
    .hero h1 { font-size: clamp(28px, 4vw, 46px); margin: 0 0 8px; }
    .hero p { color: var(--muted); margin: 0; }

    /* Grid produits */
    .toolbar { display: flex; gap: 12px; justify-content: space-between; align-items: center; margin: 26px 0 14px; }
    .filters { display: flex; gap: 8px; flex-wrap: wrap; }
    .chip { background: var(--panel); border: 1px solid var(--border); border-radius: 999px; padding: 8px 12px; cursor: pointer; }
    .active { outline: 2px solid var(--brand); }

    .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
    @media (max-width: 1000px) { .hero-wrap { grid-template-columns: 1fr; } .grid { grid-template-columns: repeat(2, 1fr); } .search input { width: 180px; } }
    @media (max-width: 560px) { .grid { grid-template-columns: 1fr; } .nav { grid-template-columns: 1fr auto; gap: 8px; } .search { grid-column: 1/-1; } }

    .card { background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; display: grid; grid-template-rows: auto 1fr auto; box-shadow: var(--shadow); }
    .card .media { aspect-ratio: 1/1; background: #0c0f13; position: relative; overflow: hidden; }
    .badge { position: absolute; top: 10px; left: 10px; background: rgba(111,231,183,.15); color: #b5f3dc; border: 1px solid rgba(111,231,183,.35); font-size: 12px; padding: 6px 8px; border-radius: 999px; }
    .card-content { padding: 14px; display: grid; gap: 6px; }
    .title { font-weight: 600; }
    .price { font-weight: 700; }
    .muted { color: var(--muted); }
    .card-actions { display: flex; gap: 10px; padding: 12px; }
    .qty { display: flex; align-items: center; gap: 8px; border: 1px solid var(--border); border-radius: 10px; padding: 6px 10px; }

    /* Panier (drawer) */
    .drawer { position: fixed; inset: 0; display: grid; grid-template-columns: 1fr min(480px, 92%); pointer-events: none; }
    .backdrop { background: rgba(0,0,0,.4); opacity: 0; transition: .25s; }
    .panel { background: #0e1116; border-left: 1px solid var(--border); transform: translateX(100%); transition: .25s; padding: 16px; display: grid; grid-template-rows: auto 1fr auto; gap: 10px; }
    .drawer.open { pointer-events: auto; }
    .drawer.open .backdrop { opacity: 1; }
    .drawer.open .panel { transform: translateX(0); }
    .cart-row { display: grid; grid-template-columns: 64px 1fr auto; gap: 10px; align-items: center; padding: 10px 0; border-bottom: 1px dashed var(--border); }
    .panel h3 { margin: 0 0 4px; }
    .panel .totals { display: grid; gap: 4px; }

    /* Checkout */
    .checkout { display: none; grid-template-columns: 1fr 1fr; gap: 16px; margin: 20px 0; }
    .checkout.show { display: grid; }
    .field { display: grid; gap: 6px; }
    .field input, .field select { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; color: var(--text); }
    .inline { grid-column: span 2; }
    footer { border-top: 1px solid var(--border); margin-top: 40px; }
    .footer-inner { padding: 30px 0; color: var(--muted); display: flex; justify-content: space-between; flex-wrap: wrap; gap: 10px; }
  </style>
</head>
<body>
  <header>
    <div class="container nav" role="navigation" aria-label="Barre de navigation">
      <a class="logo" href="#" aria-label="Accueil">
        <span class="logo-mark">M</span>
        <span>Ma Boutique</span>
      </a>
      <label class="search" aria-label="Rechercher des produits">
        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15Z" stroke="currentColor" stroke-width="1.6"/></svg>
        <input id="search" type="search" placeholder="Rechercher… (⌘/Ctrl+K)" />
      </label>
      <div class="nav-actions">
        <button class="btn" id="btn-filter" aria-label="Ouvrir les filtres">Filtres</button>
        <button class="btn" id="btn-cart" aria-label="Ouvrir le panier">🛒 <span id="cart-count" aria-live="polite">0</span></button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-wrap">
        <div class="hero-card">
          <h1>Un modèle e‑commerce moderne, rapide et 100% HTML</h1>
          <p>Liste produits, panier avec persistance, recherche, filtres et pseudo‑checkout. Personnalisez les données et connectez votre backend quand vous serez prêt.</p>
          <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
            <a href="checkout.html" class="btn primary" id="btn-checkout">Passer à la caisse</a>
            <button class="btn" id="btn-checkout-alt">Commander</button>
          </div>
        </div>
        <div class="hero-card" aria-hidden="true">
          <img src="https://images.unsplash.com/photo-1512295767273-ac109ac3acfa?q=80&w=1368&auto=format&fit=crop" alt="Illustration produits" style="border-radius:12px;" />
        </div>
      </div>
    </section>

    <section class="toolbar" id="produits">
      <div class="filters" role="listbox" aria-label="Filtres par catégorie">
        <button class="chip active" data-cat="all">Tout</button>
        <button class="chip" data-cat="vetements">Vêtements</button>
        <button class="chip" data-cat="maison">Maison</button>
        <button class="chip" data-cat="tech">Tech</button>
        <button class="chip" data-cat="sport">Sport</button>
      </div>
      <div class="muted" id="result-count">0 produits</div>
    </section>

    <section class="grid" id="product-grid" aria-live="polite"></section>

    <!-- La section checkout embarquée est conservée mais non utilisée,
         car nous redirigeons désormais vers checkout.html -->
    <section class="checkout" id="checkout">
      <div class="hero-card" style="grid-column: span 2;">
        <h2 style="margin:0 0 6px;">Coordonnées</h2>
        <div class="field"><label>Nom complet<input id="name" required placeholder="Jean Dupont" /></label></div>
        <div class="field"><label>Email<input id="email" type="email" required placeholder="jean@mail.com" /></label></div>
        <div class="field inline"><label>Adresse<input id="address" required placeholder="10 rue des Fleurs" /></label></div>
        <div class="field"><label>Ville<input id="city" required /></label></div>
        <div class="field"><label>Code postal<input id="zip" required pattern="\d{4,5}" /></label></div>
        <div class="field"><label>Pays<select id="country"><option>France</option><option>Belgique</option><option>Suisse</option><option>Canada</option></select></label></div>
      </div>
      <div class="hero-card">
        <h2 style="margin:0 0 6px;">Paiement (démo)</h2>
        <div class="field"><label>Numéro de carte<input id="card" inputmode="numeric" placeholder="4242 4242 4242 4242" /></label></div>
        <div class="field"><label>Expiration<input id="exp" placeholder="MM/AA" /></label></div>
        <div class="field"><label>CVC<input id="cvc" placeholder="123" /></label></div>
        <button class="btn primary" id="pay">Payer maintenant</button>
        <p class="muted" style="margin-top:6px;">Ce formulaire est une démonstration. Intégrez Stripe/PayPal côté serveur pour les vrais paiements.</p>
      </div>
      <div class="hero-card">
        <h2 style="margin:0 0 6px;">Résumé</h2>
        <div id="summary"></div>
      </div>
    </section>
  </main>

  <div class="drawer" id="drawer" aria-hidden="true" aria-label="Panier">
    <div class="backdrop" id="backdrop"></div>
    <aside class="panel">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3>Votre panier</h3>
        <button class="btn" id="close-drawer" aria-label="Fermer le panier">✕</button>
      </div>
      <div id="cart-items" style="overflow:auto; padding-right:6px;"></div>
      <div>
        <div class="totals">
          <div>Sous‑total : <strong id="subtotal">0,00 euro</strong></div>
          <div>TVA (20%) : <strong id="vat">0,00 euro</strong></div>
          <div>Total : <strong id="total">0,00 euro</strong></div>
        </div>
        <div style="display:flex; gap:10px; margin-top:10px;">
          <button class="btn" id="clear-cart">Vider</button>
          <button class="btn primary" id="go-checkout">Commander</button>
        </div>
      </div>
    </aside>
  </div>

  <footer>
    <div class="container footer-inner">
      <div>© <span id="year"></span> Ma Boutique. Tous droits réservés.</div>
      <div class="muted">Fait avec ❤ – Modèle open‑source (HTML/CSS/JS).</div>
    </div>
  </footer>

  <script>
    // --- Données démo ---
    const PRODUCTS = [
      {id: 'p1', name: 'Sweat unisexe Premium', price: 49.9, category: 'vetements', img: 'https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=1200&auto=format&fit=crop', badge: 'Nouveau'},
      {id: 'p2', name: 'Lampe d\'ambiance LED', price: 39.0, category: 'maison', img: 'https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=1200&auto=format&fit=crop'},
      {id: 'p3', name: 'Casque Bluetooth ANC', price: 129.0, category: 'tech', img: 'https://images.unsplash.com/photo-1518445691291-7bf406e52f9a?q=80&w=1200&auto=format&fit=crop'},
      {id: 'p4', name: 'Tapis de yoga pro', price: 59.0, category: 'sport', img: 'https://images.unsplash.com/photo-1540202404-83edca7909b6?q=80&w=1200&auto=format&fit=crop'},
      {id: 'p5', name: 'T‑shirt coupe classique', price: 24.9, category: 'vetements', img: 'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1200&auto=format&fit=crop'},
      {id: 'p6', name: 'Couverture polaire', price: 29.9, category: 'maison', img: 'https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=1200&auto=format&fit=crop'},
      {id: 'p7', name: 'Clavier mécanique', price: 99.0, category: 'tech', img: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=1200&auto=format&fit=crop'},
      {id: 'p8', name: 'Bouteille isotherme', price: 19.9, category: 'sport', img: 'https://images.unsplash.com/photo-1542736667-069246bdbc74?q=80&w=1200&auto=format&fit=crop'}
    ];

    // --- État & utilitaires ---
    const state = {
      cart: JSON.parse(localStorage.getItem('cart') || '[]'),
      filter: 'all',
      query: ''
    };
    const euro = n => n.toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' });
    const saveCart = () => localStorage.setItem('cart', JSON.stringify(state.cart));

    // --- Rendu produits ---
    const grid = document.getElementById('product-grid');
    const resultCount = document.getElementById('result-count');
    function renderProducts() {
      const q = state.query.trim().toLowerCase();
      const items = PRODUCTS.filter(p =>
        (state.filter === 'all' || p.category === state.filter) &&
        (q === '' || p.name.toLowerCase().includes(q))
      );
      resultCount.textContent = `${items.length} produit${items.length>1?'s':''}`;
      grid.innerHTML = items.map(p => `
        <article class="card" aria-label="${p.name}">
          <div class="media">
            ${p.badge ? `<span class="badge">${p.badge}</span>` : ''}
            <img loading="lazy" src="${p.img}" alt="${p.name}" />
          </div>
          <div class="card-content">
            <div class="title">${p.name}</div>
            <div class="muted">${p.category}</div>
            <div class="price">${euro(p.price)}</div>
          </div>
          <div class="card-actions">
            <div class="qty">
              <button aria-label="Diminuer" onclick="changeQty('${p.id}',-1)">−</button>
              <span id="qty-${p.id}">1</span>
              <button aria-label="Augmenter" onclick="changeQty('${p.id}',1)">+</button>
            </div>
            <button class="btn primary" onclick="addToCart('${p.id}')">Ajouter</button>
          </div>
        </article>`).join('');
    }

    // Gestion comptage quantité par produit (UI uniquement)
    const qtyMap = new Map();
    function changeQty(id, delta){
      const n = Math.max(1, (qtyMap.get(id) || 1) + delta);
      qtyMap.set(id, n);
      const el = document.getElementById(`qty-${id}`);
      if (el) el.textContent = n;
    }

    // --- Panier ---
    const drawer = document.getElementById('drawer');
    const cartItems = document.getElementById('cart-items');
    const cartCount = document.getElementById('cart-count');
    const subtotalEl = document.getElementById('subtotal');
    const vatEl = document.getElementById('vat');
    const totalEl = document.getElementById('total');

    function addToCart(id){
      const qty = qtyMap.get(id) || 1;
      const prod = PRODUCTS.find(p => p.id === id);
      const existing = state.cart.find(i => i.id === id);
      if (existing) existing.qty += qty; else state.cart.push({id, qty, price: prod.price, name: prod.name, img: prod.img});
      saveCart();
      renderCart();
      openDrawer();
    }
    function removeFromCart(id){
      state.cart = state.cart.filter(i => i.id !== id);
      saveCart();
      renderCart();
    }
    function setCartQty(id, qty){
      const item = state.cart.find(i => i.id === id);
      if (!item) return; item.qty = Math.max(1, qty|0); saveCart(); renderCart();
    }
    function clearCart(){ state.cart = []; saveCart(); renderCart(); }

    function totals(){
      const sub = state.cart.reduce((s,i)=> s + i.qty * i.price, 0);
      const vat = sub * .2; const total = sub + vat;
      subtotalEl.textContent = euro(sub);
      vatEl.textContent = euro(vat);
      totalEl.textContent = euro(total);
      cartCount.textContent = state.cart.reduce((s,i)=> s + i.qty, 0);
      // résumé checkout
      document.getElementById('summary').innerHTML = state.cart.length ?
        state.cart.map(i => `<div style="display:flex; justify-content:space-between; gap:10px;"><span>${i.name} × ${i.qty}</span><strong>${euro(i.qty*i.price)}</strong></div>`).join('') +
        `<hr style="border:none;border-top:1px dashed var(--border);margin:10px 0;"/>` +
        `<div style="display:flex; justify-content:space-between;"><span>Total</span><strong>${totalEl.textContent}</strong></div>`
        : '<span class="muted">Votre panier est vide.</span>';
    }

    function renderCart(){
      cartItems.innerHTML = state.cart.length ? state.cart.map(i => `
        <div class="cart-row">
          <img src="${i.img}" alt="${i.name}" style="width:64px; height:64px; object-fit:cover; border-radius:10px;"/>
          <div>
            <div style="font-weight:600;">${i.name}</div>
            <div class="muted">${euro(i.price)} / u.</div>
            <label class="muted" style="display:block; margin-top:6px;">Qté : <input type="number" min="1" value="${i.qty}" style="width:70px;" oninput="setCartQty('${i.id}', this.value)" /></label>
          </div>
          <div style="display:grid; gap:6px; justify-items:end;">
            <strong>${euro(i.qty * i.price)}</strong>
            <button class="btn" onclick="removeFromCart('${i.id}')">Supprimer</button>
          </div>
        </div>`).join('') : '<p class="muted">Votre panier est vide.</p>';
      totals();
    }

    function openDrawer(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); }
    function closeDrawer(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }

    // --- Recherche & filtres ---
    document.querySelectorAll('.chip').forEach(ch => ch.addEventListener('click', () => {
      document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
      ch.classList.add('active');
      state.filter = ch.dataset.cat;
      renderProducts();
    }));

    const inputSearch = document.getElementById('search');
    inputSearch.addEventListener('input', () => { state.query = inputSearch.value; renderProducts(); });
    window.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') { e.preventDefault(); inputSearch.focus(); }
    })

    // --- Checkout (redirige désormais vers checkout.html) ---
    document.getElementById('btn-checkout-alt').addEventListener('click', ()=> { window.location.href = 'checkout.html'; });
    document.getElementById('go-checkout').addEventListener('click', ()=> { window.location.href = 'checkout.html'; });

    // --- Ouverture/fermeture panier ---
    document.getElementById('btn-cart').addEventListener('click', openDrawer);
    document.getElementById('close-drawer').addEventListener('click', closeDrawer);
    document.getElementById('backdrop').addEventListener('click', closeDrawer);
    document.getElementById('clear-cart').addEventListener('click', clearCart);

    // --- Init ---
    document.getElementById('year').textContent = new Date().getFullYear();
    renderProducts();
    renderCart();
  </script>
</body>
</html>
